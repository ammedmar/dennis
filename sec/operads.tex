
\section{Operads and props} \label{s:operads}

In this section we reviewing the basic notions of operads and props.
For a more complete presentation we refer the reader to, for example, \cite{markl2008props}.

\subsection{Symmetric modules and bimodules}

Let $\Sym$ be the category whose objects are the natural numbers and whose set of morphisms between $m$ and $n$ is empty if $m \neq n$ and is otherwise the symmetric group $\Sym_n$.
A (left) \textit{$\Sym$-module} (resp. $\Sym$-\textit{bimodule}) is a functor from $\Sym$ (resp. $\Sym \times \Sym^\op$) to $\Ch$.
We respectively denote by $\SymMod$ and $\SymBimod$ the categories of left $\Sym$-modules and of $\Sym$-bimodules with morphisms given by natural transformations.
The group homomorphisms $\Sym_n \to \Sym_n \times \Sym_1$ induce a forgetful functor $\forget \colon \SymBimod \to \SymMod$.
Explicitly, $\forget(\cP)(r) = \cP(1, r)$ for $r \in \N$.
The similarly defined forgetful functor to right $\Sym$-modules will not be used.

\subsection{Composition structures}

We can define \textit{operads} and \textit{props} by enriching $\Sym$-modules and $\Sym$-bimodules with certain composition structures.
For a complete presentation of these concepts we refer to Definition~11 and 54 of \cite{markl2008props}.
Intuitively, using examples defined in the next subsection, operads and props can be understood by abstracting the composition structure naturally present in the left $\Sym$-module $\End^C$, naturally an operad, and the $\Sym$-bimodule $\End^C_C$, naturally a prop.
We remark that the prop structure on $\cP$ restricts to an operad structure on $\forget(\cP)$.

\subsection{Representations}

Given a chain complex $C$ define
\[
\End^C(r) = \Hom(C, C^{\otimes r})
\quad \text{and} \quad
\End^C_C(s, r) = \Hom(C^{\otimes s}, C^{\otimes r})
\]
with their natural operad and prop structures respectively.

Given an operad $\cO$, an $\cO$-\textit{structure} on $C$ is an operad morphism $\cO \to \End^C$.
If $C$ is equipped with an $\cO$-\textit{structure} we say it is an $\cO$-\textit{coalgebra}, denoting the category of these by $\coAlg_\cO$.
Similarly for a prop $\cP$, we define the notions of $\cP$-\textit{structure} and of $\cP$-\textit{bialgebra}, denoting their category by $\biAlg_\cP$.

We remark that among these two categories only $\coAlg_\cO$ is cocomplete in general.

\subsection{Resolutions}

Recall that a \textit{free $\Sym_r$-resolution} of a chain complex $C$ is a quasi-isomorphism $R \to C$ from a chain complex of free $\k[\Sym_r]$-modules.

An $\Sym$-module $M$ is said to be $E_{\infty}$ if there exists a morphism of $\Sym$-modules $M \to \underline{\k}$ inducing for each $r \in \N$ a free $\Sym_r$-resolution $M(r) \to \k$.
For example, we can obtain one such $\Sym$-module by using the functor of singular chains and the set, parameterized by $r \in \N$, of maps to the terminal space from models of the universal bundle $\mathrm{E} \Sym_r$.

An operad is said to be $E_{\infty}$ if its underlying $\Sym$-module is $E_\infty$.

\subsection{Free constructions} \label{ss:free constructions}

The \textit{free prop} $\free(M)$ generated by an $\Sym$-bimodule $M$ is constructed using isomorphism classes of directed graphs with no directed loops that are enriched with the following labeling structure.
We think of each directed edge as built from two compatibly directed half-edges.
For each vertex $v$ of a directed graph $\Gamma$, we have the sets $in(v)$ and $out(v)$ of half-edges that are respectively incoming to and outgoing from $v$.
Half-edges that do not belong to $in(v)$ or $out(v)$ for any $v$ are divided into the disjoint sets $in(\Gamma)$ and $out(\Gamma)$ of incoming and outgoing external half-edges.
For any positive integer $n$ let $\overline{n} = \{1, \dots, n\}$ and set $\overline{0} = \emptyset$.
For any finite set $S$, denote the cardinality of $S$ by $|S|$.
The labeling is given by bijections
\[
\overline{|in(\Gamma)|}\to in(\Gamma), \qquad
\overline{|out(\Gamma)|}\to out(\Gamma),
\]
and
\[
\overline{|in(v)|}\to in(v), \qquad
\overline{|out(v)|}\to out(v),
\]
for every vertex $v$.
We refer to the isomorphism classes of such labeled directed graphs with no directed loops as $(n,m)$\textit{-graphs} denoting the set of these by $\graphs(m,n)$.
We use graphs immersed in the plane to represent elements in $\graphs(m,n)$, please see \cref{f:immersion}.
We consider the right action of $\Sym_n$ and the left action of $\Sym_m$ on a $(n,m)$-graph given respectively by permuting the labels of $in(\Gamma)$ and $out(\Gamma)$.
This action defines the $\Sym$-bimodule structure on the free prop
\begin{equation} \label{e:free prop}
\free(M)(m,n) \ = \bigoplus_{\Gamma \in \graphs(m,n)} \bigotimes_{v \in Vert(\Gamma)} out(v) \otimes_{\Sym_q} M(p, q) \otimes_{\Sym_p} in(v),
\end{equation}
where we simplified the notation writing $p$ and $q$ for $\overline{|in(v)|}$ and $\overline{|out(v)|}$ respectively.
The composition structure is defined by (relabeled) grafting and disjoint union.

The \textit{free operad} generated by an $\Sym$-module is defined analogously using $(1,n)$-graphs only.

\begin{figure}
%	\input{aux/immersion}
	\caption{Immersed graphs represent labeled directed graphs with the direction implicitly given from top to bottom and the labeling from left to right.}
	\label{f:immersion}
\end{figure}

\subsection{The prop $\M$} \label{ss:definition of M}

We review from \cite{medina2020prop1} the finitely presented $E_{\infty}$-prop $\M$ which, given its small number of generators and relations, is well suited to define $E_{\infty}$-structures.

\begin{definition}
	Let $\M$ be the prop generated by
	\begin{equation} \label{e:generators of M}
	\counit\,, \hspace*{.6cm} \coproduct\,, \hspace*{.6cm} \product,
	\end{equation}
	in degrees $0$, $0$ and $1$ respectively, and boundaries
	\begin{equation} \label{e:boundary of M}
	\partial\ \counit = 0,
	\hspace*{.6cm}
	\partial\, \coproduct = 0,
	\hspace*{.6cm}
	\partial \product = \ \boundary\,,
	\end{equation}
	modulo the prop ideal generated by
	\begin{equation} \label{e:relations of M}
	\leftcounitality\,, \hspace*{.6cm} \rightcounitality\,, \hspace*{.5cm} \coassociativity\,, \hspace*{.6cm} \productcounit.
	\end{equation}
\end{definition}

Explicitly, any element in $\M(m,n)$ can be written as a linear combination of the $(m,n)$-graphs generated by those in \eqref{e:generators of M} via grafting, disjoint union and relabeling, modulo the prop ideal generated by the relations in \eqref{e:relations of M}.
Its boundary is determined, using \eqref{e:free prop}, by \eqref{e:boundary of M}.

Originally this prop was defined without imposing the relation \coassociativity \,.
This is advantageous since in that case the associated reduced operad is a cofibrant resolution of the terminal operad.
Since in this work we are interested in extending the Alexander--Whitney and Serre coalgebras, which are coassociative, we find it convenient to impose this relation, so obtaining an inclusion $\As \to \UM$ and a forgetful functor $\coAlg_\UM \to \coAlg$.

The same proof given in \cite[Theorem 3.3]{medina2020prop1} establishes the following.

\begin{proposition}
	The operad $\UM$ is $E_{\infty}$.
\end{proposition}

We remark that, as proven in \cite{medina2018prop2}, this prop is obtained from applying the functor of cellular chains to a finitely presented prop over the category of CW-complexes.

\subsection{Simplicial \pdfEinfty-structure} \label{ss:e-infty on simplicial}

We review from \cite{medina2020prop1} a natural $\mathcal M$-structure on the chains of standard simplices.
These define, for any simplicial set, a natural $\UM$-structure on its chains generalizing the $E_{\infty}$-coalgebra structures constructed by McClure--Smith \cite{mcclure2003multivariable} and Berger--Fresse \cite{berger2004combinatorial}.

An $\M$-structure is specified by three linear maps, the images of the generators
\[
\counit, \quad \coproduct, \quad \product,
\]
satisfying the relations in the presentation of $\mathcal M$.
For the chains on standard simplices, the first two generators are send respectively to the counit and coproduct of the Alexander--Whitney coalgebra as defined in \cref{ss:aw coalgebra}, and the third generator to an algebraic version of the join $\ast \colon \chains(\simplex^n)^{\otimes 2} \to \chains(\simplex^n)$ defined by
\[
\left[v_0, \dots, v_p \right] \ast \left[v_{p+1}, \dots, v_q\right] = \begin{cases} (-1)^{p+|\pi|} \left[ v_{\pi(0)}, \dots, v_{\pi(q)} \right] & \text{ if } v_i \neq v_j \text{ for } i \neq j, \\
0 & \text{ otherwise}, \end{cases}
\]
where $\pi$ is the permutation that orders the totally ordered set of vertices, and $(-1)^{|\pi|}$ its sign.

The same proof given in \cite[Theorem 4.2]{medina2020prop1} establishes the following.

\begin{proposition} \label{p:simplicial chain bialgebra}
	For every $n \in \mathbb{N}$, the assignment
	\[
	\counit \mapsto \epsilon, \quad \coproduct \mapsto \Delta, \quad \product \mapsto \ast,
	\]
	defines a natural $\mathcal M$-structure on $\chains(\simplex^n)$ extending the Alexander--Whitney coalgebra.
\end{proposition}

The chains on general simplicial sets are not equipped with an $\M$-structure, but using the forgetful functor from $\biAlg_{\M}$ to the cocomplete category $\coAlg_\UM$ allows us to Yoneda extend the induced natural $\UM$-structures on standard simplices to all simplicial sets.
Specifically, we obtain a lift:
\[
\begin{tikzcd}[column sep=normal, row sep=small]
& \coAlg_\UM \arrow[d] \\
& \coAlg \arrow[d] \\
\sSet \arrow[r, "\schains"]
\arrow[ur, "\schainsA", out=45, in=180]
\arrow[uur, "\schainsUM", out=90, in=180]
& \Ch.
\end{tikzcd}
\]

\subsection{Cubical \pdfEinfty-structure} \label{ss:e-infty on cubical}

We follow the presentation of \cref{ss:e-infty on simplicial} closely to review from \cite{medina2021cubical} a natural $\mathcal M$-structure on the chains of standard cubes leading to a natural $\UM$-structure on the chains of any cubical set.

An $\M$-structure is specified by three linear maps, the images of the generators
\[
\counit, \quad \coproduct, \quad \product,
\]
satisfying the relations in the presentation of $\mathcal M$.
For the chains on standard cubes, the first two generators are send respectively to the counit and coproduct of the Serre coalgebra as defined in \cref{ss:serre coalgebra}, and the third generator to a degree one map $\ast \colon \schains(\simplex^n)^{\otimes 2} \to \schains(\simplex^n)$ defined by
\begin{align*}
(x_1 \otimes \dots \otimes x_n) \ast (y_1 \otimes \dots \otimes y_n) =
(-1)^{|x|} \sum_{i=1}^n x_{<i} \, \epsilon(y_{<i}) \otimes x_i \ast y_i \otimes \epsilon(x_{>i}) \, y_{>i},
\end{align*}
where
\begin{align*}
x_{<i} & = x_1 \otimes \dots \otimes x_{i-1}, &
y_{<i} & = y_1 \otimes \dots \otimes y_{i-1}, \\
x_{>i} & = x_{i+1} \otimes \dots \otimes x_n, &
y_{>i} & = y_{i+1} \otimes \dots \otimes y_n,
\end{align*}
with the convention
\[
x_{<1} = y_{<1} = x_{>n} = y_{>n} = 1 \in \k,
\]
and the only non-zero values of $x_i \ast y_i$ are
\[
\ast([0] \otimes [1]) = [0, 1], \qquad \ast([1] \otimes [0]) = -[0, 1].
\]

The same proof given in \cite{medina2020prop1} establishes the following.

\begin{proposition} \label{thm: cubical chain bialgebra}
	For every $n \in \mathbb{N}$, the assignment
	\[
	\counit \mapsto \epsilon, \quad \coproduct \mapsto \Delta, \quad \product \mapsto \ast,
	\]
	defines a natural $\mathcal M$-structure on $\chains(\cube^n)$ extending the Serre coalgebra.
\end{proposition}

Yoneda extending the induced natural $\UM$-structures on standard simplices to all simplicial sets defines a lift of the functor of cubical chains to $\UM$-coalgebras:
\begin{equation} \label{e:lift of cubical chains to UM-coalgs}
\begin{tikzcd}[column sep=normal, row sep=small]
& \coAlg_\UM \arrow[d] \\
& \coAlg \arrow[d] \\
\cSet \arrow[r, "\cchains"]
\arrow[ur, "\cchainsA", out=45, in=180]
\arrow[uur, "\cchainsUM", out=90, in=180]
& \Ch.
\end{tikzcd}
\end{equation}
In the next section we will show that $\cchainsUM$ is a monoidal functor.